
apiVersion: trainer.kubeflow.org/v1alpha1
kind: TrainingRuntime
metadata:
  name: common-trainer-runtime
  namespace: training # Or the namespace where your runtime will live
spec:
  template:
    metadata:
      name: common-trainer-runtime
      namespace: training
    spec:
      replicatedJobs:
        - name: common-trainer-rj
          template:
            metadata:
              name: common-trainer-rj
              namespace: training
            spec:
              parallelism: 1
              template:
                metadata: 
                  name: common-trainer-pod
                  namespace: training
                spec:
                  containers:
                    - image: snpsuen/call_train_lib:02
                      imagePullPolicy: Always
                      name: simple-train-container
                      volumeMounts:
                        - name: pytorch-vol
                          mountPath: /pytorch
                  volumes:
                    - name: pytorch-vol
                      hostPath:
                        path: /var/tmp/pytorch
                        type: DirectoryOrCreate
---
apiVersion: trainer.kubeflow.org/v1alpha1
kind: TrainJob
metadata:
  name: load-data-job
  namespace: training # Or the namespace where your runtime will live
spec:
  runtimeRef:
    kind: TrainingRuntime
    name: common-trainer-runtime
